Cleaner Akka:
* is an cache for Scala
* uses Akka so that cache data can be distributed among different server
* uses JVM direct memory to store cache data in aff-JVM-heap memory
* frees memory immediately when cache entry is removed, if sun.misc.Cleaner exists
* imitates JCache API

Local cache
-----------

Create a cache with limit 10 MB (max is Int.MaxValue, 2GB):

  import akka.cache._
  val cache = new CacheActorRef(10 * 1024 * 1024)

Put:

  cache.put("John", 83)

Get:

  val future = cache.get("John")  // See http://akka.io/docs/akka/1.3-RC4/scala/futures.html
  future.get                      // => Some(83)
  cache.get("Peter").get          // => None

Remove:

  cache.remove("John")
  cache.removeAll()

Conditional put:

  cache.putIfAbsent("Jack", 73)

Time to live:

  cache.put("John", 83, 5)           // Entry will be invalidated after 5 secs
  cache.putIfAbsent("Jack", 73, 10)  // 10 secs

Remote cache
------------

Step 1: On the cache server

See http://akka.io/docs/akka/1.3-RC4/scala/remote-actors.html to know how to
enable remote mode. For example:

  akka.actor.Actor.remote.start("localhost", 2552)

Register 10 MB cache:

  RemoteCacheActor.register("my cache", 10 * 1024 * 1024)

Step 2: On the cache client

  val cache = new RemoteCacheActorRef("my cache", "localhost", 2552)
  cache.put("John", 83)
  cache.get("John").get  // Same as local cache above

Distributed cache
-----------------

Cache will be distributed among multiple nodes.

Step 1: Config nodes to put cache data to in akka-cache.conf.

Step 2:


Remember to config MaxDirectMemorySize
--------------------------------------

Amount of direct memory that can be allocated is limited by JVM option
-XX:MaxDirectMemorySize, which by default has relatively low size of 64 MB.
To increase, add setting like this when starting JVM:

-XX:MaxDirectMemorySize=512m

Otherwise you are likely to hit an OutOfMemoryError when using large cache.

More info
---------

* Off-heap cache: http://www.quora.com/How-does-BigMemory-hide-objects-from-the-Java-garbage-collector
* JCache: https://github.com/jsr107/jsr107spec
* sun.misc.Unsafe: http://stackoverflow.com/questions/5574241/interesting-uses-of-sun-misc-unsafe
* sun.misc.Cleaner: http://groups.google.com/group/netty/browse_thread/thread/3be7f573384af977
